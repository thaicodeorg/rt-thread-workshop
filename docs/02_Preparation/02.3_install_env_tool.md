# ติดตั้ง ENV Tool v2.0.0



!!! Note "สรุป"
    Env Tools เป็นเครื่องมือ ที่ช่วยในการพัฒนา RT-Thread มีหน้าที่

    - กำหนดค่า Config ผ่านทาง คำสั่ง Menuconfig  
    - เลือกใช้ Featurs ของ Kernel ที่ต้องการเช่น BSP,UART,I2C,SPI,LCD เป็นต้น
    - จัดการสำหรับการ โหลด Dependecy ของ Features 
    - ระบบการจัดการ package เรียกว่า RT-Thread Online Package คล้ายกับ App store ของ RT-thread

เปิด browser [https://www.rt-thread.io/download.html?download=Env](https://www.rt-thread.io/download.html?download=Env)

![](./images/7_env_tool.png)
- กด ปุ่ม ``Free Download`` เพื่อไปยัง Github ของ Source Code [https://github.com/RT-Thread/env-windows/releases](https://github.com/RT-Thread/env-windows/releases)
- ทาง Resenes ได้คำอธิบาย เกี่ยวข้องกับ version นี้ โดย ให้เราเลือกวิธีการติดตั้ง ใน วิธีที่ 1 
![](./images/7_env_tool2.png)
- จากทำแนะน้ำ ได้ บอกให้ทำการ Download file ``env-windows-v2.0.0.7z`` และ ทำการ Extract โดยใช้โปรแกรม 7zip ([https://www.7-zip.org/](https://www.7-zip.org/)) ถ้ายังไม่ได้ติดตั้งในเครื่องก็ทำการติดตั้งให้เรียบร้อย ก่อนนะครับ 
![](./images/7_env_tool3.png)
![](./images/7_env_tool4.png)
![](./images/7_env_tool5.png)
- กำหนด path ที่ต้องการแตกไฟล์ ``C:\Renesas\env-windows``
![](./images/7_env_tool6.png)
- copy file  
![](./images/7_env_tool7.png)
- หลังจากที่แตกไฟล์เรียบร้อยให้ทำการเปิด folder ไปที่ ``C:\Renesas\env-windows\env-windows`` เพื่อทำการติดตั้ง Env.exe 
![](./images/7_env_tool8.png)


> [!TIP]
> Reneses ได้ออกแบบการใช้งาน Env ไว้อย่างรอบคอบ เพื่อไม่ให้มีผลกระทบกับระบบ กับเครื่อง Host ของนักพัฒนา เพราะการ Build Source Code ของ Realtime OS ได้นั้นจะต้องใช้เครื่องมือ Build ชื่อว่า scons [https://scons.org/](https://scons.org/) 
>
- ให้ทำการ Double Click file ``env.exe`` ได้เลย โดย windows เราทำการยืนยันเพื่อความปลอดภัย ให้เรากด ``More info``  
![](./images/7_env_tool9.png)
- กด ``Run anyway``
![](./images/7_env_tool10.png)
- ขั้นตอนนี้ จะเป็นการติดตั้ง ConEmu ([https://conemu.github.io/](https://conemu.github.io/)) เพื่อต้องการแยก Environment ของการพัฒนาจาก System ให้ชัดเจน ให้เลือก ``Unblock and Continue`` 
![](./images/7_env_tool11.png)
- เลือก Font สำหรับ Terminal font เช่น Consolas หรือ monospace
![](./images/7_env_tool12.png)
![](./images/7_env_tool13.png)
![](./images/7_env_tool14.png)
- pip จะทำได้ทำการติดตั้ง scons และ Depedencies ที่ต้องใช้
![](./images/7_env_tool15.png)

### ทดสอบ scons version
- scons เป็น software ในกลุ่มที่ต้องใช้ cli
![](./images/7_env_tool16.png)

### Bind ConEmu ให้สามารถเรียกใช้ ได้จาก menu right click windows
![](./images/7_env_tool17.png)

![](./images/7_env_tool18.png)

## ทำสอบการ Build Source Code
ต่อไปเป็นการทำสอบการ Build Source Code ด้วย scons โดยให้เราไปทำการ Clone ตัวอย่าง Source ที่ Github  [https://github.com/RT-Thread/rt-thread](https://github.com/RT-Thread/rt-thread) ให้เรียบร้อย โดยทำการ Clone Souce Code มายัง ``C:\reneses`` เหมือนเดิม
![](./images/7_env_tool19.png)

- ให้เราทำการ Fork project มายัง Github Code ของเรา ก่อน ตามคำแนะนำของ Contribute Guild line (https://github.com/RT-Thread/rt-thread/blob/master/.github/CONTRIBUTING.md)
![](./images/7_env_tool20.png)
![](./images/7_env_tool21.png)
- รอสักครูเพื่อให้ Fork ให้เรียบร้อย
![](./images/7_env_tool22.png)
- หลังจาก Fork เรียบร้อย ให้ ทำ Clone Project ที่ Clone มา
![](./images/7_env_tool23.png)
- เปิด windows terminal แล้วไปยัง C:\Reneses แล้ว Clone ด้วยคำสั่ง
```
git clone [url]
```
![](./images/7_env_tool24.png)
  
- สร้าง branch ใหม่
```
git checkout -b [branch name]
```
- เช่น ``git checkout -b dev``
  
```bash
cd rt-thread
git checkout -b dev
git branch
```
![](./images/7_env_tool25.png)

### ทดสอบการ Build source ด้วย เครื่องมือ scons
หลังจาก Fork และ Clone source code มาเรียบร้อยก็ให้ทำการเปิด ด้วย File Browser ไปยัง folder ``C:\Renesas\rt-thread\bsp\renesas\ra8d1-vision-board``
![](./images/7_env_tool26.png)
- จากรูปด้านบน คือการเปิด ConEmu ที่ Folder นี้ โดยให้เราทำการ Right ขวา ในพื้นที่ว่างๆ ของ หน้าต่าง Browser แล้ว เลือก ``show more option``

![](./images/7_openconemu.gif)


- ทดสอบคำสั่ง ด้วยการพิมพ์ ด้านล่าง และ เพื่อให้ scons ทำการ Download file ที่จะต้องใช้ในการ Build 
```
ls -l SCon*
scons
```
ดูผลที่ได้
![](./images/7_env_tool27.png)

## โครงสร้าง source code 

![](./images/7_env_tool28.png)

![](./images/7_env_tool29.png)

## Make menuconfig
- เปิด ConEmu ใน Project Folder ``C:\Renesas\rt-thread\bsp\renesas\ra8d1-vision-board``
![](./images/7_menuconfig.gif)

- การใช้ Keyboard สำหรับการควบคุมการเลือก ค่าต่างสำหรับ เตรียมค่า Kernel parameter ก่อนการ Build
![](./images/7_hotkey_menuconfig.png)

## file ``rtconfig.h`` คือ File ที่เก็บค่า config ที่เราเลือกไว้
![](./images/7_rt-config.png)

## install pip ใน Env 
- ติดตั้ง pip ใน Env Environment ให้ Donwload file ``https://bootstrap.pypa.io/get-pip.py`` และ สั่งคำสั่ง ``python get-pip.py`` ใน Env Environment
![](./images/7_install_pip.gif)
- หากในเครื่องของท่านไม่มีคำสั่ง Wget ก็ไม่เป็น ให้ Download วิธีการใดก็ได้เพียงแต่ต้อง รัน ``python get-pip.py`` ใน Env เท่านั้น 